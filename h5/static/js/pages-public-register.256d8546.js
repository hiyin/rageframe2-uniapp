(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-public-register"],{"01ad":function(e,t,i){var r=i("2922");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=i("4f06").default;a("236053e2",r,!0,{sourceMap:!1,shadowMode:!1})},2922:function(e,t,i){var r=i("24fb");t=r(!1),t.push([e.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */.register[data-v-d5cf1258]{padding-top:60px;position:relative;width:100vw;overflow:hidden;background:#fff}.register .wrapper[data-v-d5cf1258]{position:relative;width:100vw;z-index:90;background:#fff;padding-bottom:%?40?%}.register .wrapper .welcome[data-v-d5cf1258]{position:relative;left:%?50?%;top:%?-90?%;font-size:%?46?%;color:#555;text-shadow:1px 0 1px rgba(0,0,0,.3)}.register .wrapper .input-content[data-v-d5cf1258]{padding:0 %?60?%}.register .wrapper .input-item[data-v-d5cf1258]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:0 %?30?%;background:#f8f6fc;height:%?120?%;border-radius:4px;margin-bottom:%?50?%}.register .wrapper .input-item[data-v-d5cf1258]:last-child{margin-bottom:0}.register .wrapper .input-item .tit[data-v-d5cf1258]{height:%?50?%;line-height:%?56?%;font-size:%?26?%;color:#606266}.register .wrapper .input-item uni-input[data-v-d5cf1258]{width:calc(100% - %?100?%);height:%?60?%;font-size:%?30?%;color:#303133;width:100%}.register .wrapper .input-item-sms-code[data-v-d5cf1258]{position:relative;width:100%}.register .wrapper .input-item-sms-code .sms-code-btn[data-v-d5cf1258]{position:absolute;color:#111;right:%?20?%;bottom:%?20?%;font-size:%?28?%}.register .wrapper .input-item-sms-code .sms-code-resend[data-v-d5cf1258]{color:#999}.register .wrapper .input-item-sms-code .sms-code-btn[data-v-d5cf1258]:after{border:none;background-color:initial}.register .wrapper .forget-section[data-v-d5cf1258]{font-size:%?26?%;color:#4399fc;text-align:center;margin-top:%?40?%}.register .back-btn[data-v-d5cf1258]{position:absolute;left:%?40?%;z-index:9999;padding-top:0;top:%?40?%;font-size:%?40?%;color:#303133}.register .left-top-sign[data-v-d5cf1258]{font-size:%?120?%;color:#f8f8f8;position:relative;left:%?-16?%}.register .right-top-sign[data-v-d5cf1258]{position:absolute;top:%?80?%;right:%?-30?%;z-index:95}.register .right-top-sign[data-v-d5cf1258]:before, .register .right-top-sign[data-v-d5cf1258]:after{display:block;content:"";width:%?400?%;height:%?80?%;background:#b4f3e2}.register .right-top-sign[data-v-d5cf1258]:before{-webkit-transform:rotate(50deg);transform:rotate(50deg);border-radius:0 50px 0 0}.register .right-top-sign[data-v-d5cf1258]:after{position:absolute;right:%?-198?%;top:0;-webkit-transform:rotate(-50deg);transform:rotate(-50deg);border-radius:50px 0 0 0\n  /* background: pink; */}.register .register-section[data-v-d5cf1258]{margin:%?30?% 0 %?50?%;width:100%;font-size:%?26?%;color:#606266;text-align:center}.register .register-section uni-text[data-v-d5cf1258]{color:#4399fc;margin-left:%?10?%}',""]),e.exports=t},"2d67":function(e,t,i){"use strict";i.r(t);var r=i("48ec"),a=i("a119");for(var s in a)"default"!==s&&function(e){i.d(t,e,(function(){return a[e]}))}(s);i("ec62");var o,n=i("f0c5"),c=Object(n["a"])(a["default"],r["b"],r["c"],!1,null,"d5cf1258",null,!1,r["a"],o);t["default"]=c.exports},"48ec":function(e,t,i){"use strict";var r,a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"register"},[i("v-uni-text",{staticClass:"back-btn iconfont iconzuo",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.navBack.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"right-top-sign"}),i("v-uni-view",{staticClass:"wrapper"},[i("v-uni-view",{staticClass:"left-top-sign"},[e._v("REGISTER")]),i("v-uni-view",{staticClass:"welcome"},[e._v("账号注册！")]),i("v-uni-view",{staticClass:"input-content"},[i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[e._v("手机号码")]),i("v-uni-input",{attrs:{type:"number",placeholder:"请输入手机号码",maxlength:"11"},model:{value:e.registerParams.mobile,callback:function(t){e.$set(e.registerParams,"mobile",t)},expression:"registerParams.mobile"}})],1),i("v-uni-view",{staticClass:"input-item input-item-sms-code"},[i("v-uni-view",{staticClass:"input-wrapper"},[i("v-uni-view",{staticClass:"rf-input-wrapper"},[i("v-uni-view",{staticClass:"tit"},[e._v("验证码")]),i("v-uni-input",{attrs:{type:"number",placeholder:"请输入验证码",maxlength:"4","data-key":"mobile"},model:{value:e.registerParams.code,callback:function(t){e.$set(e.registerParams,"code",t)},expression:"registerParams.code"}})],1),i("v-uni-button",{staticClass:"sms-code-btn",attrs:{disabled:e.smsCodeBtnDisabled},on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.getSmsCode.apply(void 0,arguments)}}},[e.smsCodeBtnDisabled?i("v-uni-text",{staticClass:"sms-code-resend"},[e._v(e._s("重新发送 ("+e.codeSeconds+")"))]):i("v-uni-text",[e._v("获取验证码")])],1)],1)],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[e._v("密码")]),i("v-uni-input",{attrs:{type:"password",placeholder:"请输入密码",maxlength:"18"},model:{value:e.registerParams.password,callback:function(t){e.$set(e.registerParams,"password",t)},expression:"registerParams.password"}})],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[e._v("确认密码")]),i("v-uni-input",{attrs:{type:"password",placeholder:"请输入确认密码",maxlength:"18"},model:{value:e.registerParams.password_repetition,callback:function(t){e.$set(e.registerParams,"password_repetition",t)},expression:"registerParams.password_repetition"}})],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[e._v("昵称")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请输入您的昵称",maxlength:"12"},model:{value:e.registerParams.nickname,callback:function(t){e.$set(e.registerParams,"nickname",t)},expression:"registerParams.nickname"}})],1),e.closeRegisterPromoCode?i("v-uni-view",{staticClass:"input-item"},[i("v-uni-text",{staticClass:"tit"},[e._v("邀请码")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请输入您的邀请码"},model:{value:e.registerParams.promoCode,callback:function(t){e.$set(e.registerParams,"promoCode",t)},expression:"registerParams.promoCode"}})],1):e._e()],1),i("v-uni-button",{staticClass:"confirm-btn",class:"bg-"+e.themeColor.name,attrs:{disabled:e.btnLoading,loading:e.btnLoading},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toRegister.apply(void 0,arguments)}}},[e._v("注册")])],1),i("v-uni-view",{staticClass:"register-section"},[e._v("已经注册过了?"),i("v-uni-text",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.navTo("/pages/public/login")}}},[e._v("马上登录")])],1),i("v-uni-view",{staticClass:"footer-protocol"},[i("v-uni-text",{staticClass:"cuIcon",class:e.appAgreementDefaultSelect?"text-"+e.themeColor.name+" cuIcon-radiobox":"cuIcon-round",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.isAppAgreementDefaultSelect.apply(void 0,arguments)}}}),i("v-uni-text",{staticClass:"content"},[e._v("同意")]),i("v-uni-navigator",{class:"text-"+e.themeColor.name,attrs:{url:"/pages/set/about/detail?field=protocol_register&title=注册协议","open-type":"navigate"}},[e._v("《注册协议》")])],1)],1)},s=[];i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return r}))},"5dc2":function(e,t,i){"use strict";var r=i("ee27");i("c975"),i("e25e"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var a=r(i("c964")),s=r(i("f3f3")),o=i("2f62"),n=i("74ef"),c=r(i("8955")),d={data:function(){return{appAgreementDefaultSelect:this.$mSettingConfig.appAgreementDefaultSelect,closeRegisterPromoCode:this.$mSettingConfig.closeRegisterPromoCode,registerParams:{mobile:"",password:"",password_repetition:"",promoCode:"",nickname:"",code:""},btnLoading:!1,reqBody:{},codeSeconds:0,smsCodeBtnDisabled:!0}},onShow:function(){uni.getStorageSync("accessToken")&&this.$mRouter.reLaunch({route:"/pages/index/index"})},onLoad:function(e){this.$mStore.getters.hasLogin&&this.$mRouter.reLaunch({route:"/pages/index/index"});var t=(0,c.default)().valueOf()/1e3-uni.getStorageSync("registerSmsCodeTime");t<60?(this.codeSeconds=this.$mConstDataConfig.sendCodeTime-parseInt(t,10),this.handleSmsCodeTime(this.codeSeconds)):(this.codeSeconds=this.$mConstDataConfig.sendCodeTime,this.smsCodeBtnDisabled=!1,uni.removeStorageSync("registerSmsCodeTime"));var i=uni.getStorageSync("backToPage");-1!==i.indexOf("promo_code")?this.registerParams.promoCode=JSON.parse(i)["query"]["promo_code"]:this.registerParams.promoCode=e.promo_code},methods:(0,s.default)({isAppAgreementDefaultSelect:function(){this.appAgreementDefaultSelect=!this.appAgreementDefaultSelect}},(0,o.mapMutations)(["login"]),{navBack:function(){this.$mRouter.back()},navTo:function(e){this.$mRouter.push({route:e})},getSmsCode:function(){var e=this;this.reqBody["mobile"]=this.registerParams["mobile"];var t=this.$mGraceChecker.check(this.reqBody,this.$mFormRule.sendCodeRule);t?this.$http.post(n.smsCode,{mobile:this.registerParams.mobile,usage:"register"}).then((function(t){t.data?e.$mHelper.toast("验证码发送成功, 验证码是".concat(t.data)):e.$mHelper.toast("验证码已发送."),e.smsCodeBtnDisabled=!0,uni.setStorageSync("registerSmsCodeTime",(0,c.default)().valueOf()/1e3),e.handleSmsCodeTime(59)})):this.$mHelper.toast(this.$mGraceChecker.error)},handleSmsCodeTime:function(e){var t=this,i=setInterval((function(){0===e?(clearInterval(i),t.smsCodeBtnDisabled=!1):(t.codeSeconds=e,t.smsCodeBtnDisabled=!0,e--)}),1e3)},toRegister:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$mSettingConfig.closeRegister){t.next=3;break}return e.$mHelper.toast("暂未开放注册，敬请期待～"),t.abrupt("return");case 3:if(e.appAgreementDefaultSelect){t.next=6;break}return e.$mHelper.toast("请勾选同意注册协议，即可注册哦"),t.abrupt("return");case 6:if(e.reqBody["mobile"]=e.registerParams["mobile"],e.reqBody["password"]=e.registerParams["password"],e.reqBody["code"]=e.registerParams["code"],e.reqBody["nickname"]=e.registerParams["nickname"],i=e.$mGraceChecker.check(e.reqBody,e.$mFormRule.registerRule),i){t.next=14;break}return e.$mHelper.toast(e.$mGraceChecker.error),t.abrupt("return");case 14:if(e.registerParams["password"]===e.registerParams["password_repetition"]){t.next=17;break}return e.$mHelper.toast("两次输入的密码不一致"),t.abrupt("return");case 17:return e.reqBody["password_repetition"]=e.registerParams["password_repetition"],e.reqBody["promo_code"]=e.registerParams["promoCode"],e.btnLoading=!0,e.reqBody.group=e.$mHelper.platformGroupFilter(),t.next=23,e.$http.post(n.registerByPass,e.reqBody).then((function(){e.btnLoading=!1,e.$mHelper.toast("恭喜您注册成功"),uni.setStorageSync("loginMobile",e.reqBody["mobile"]),uni.setStorageSync("loginPassword",e.reqBody["password"]),e.$mRouter.push({route:"/pages/public/login"})})).catch((function(){e.btnLoading=!1}));case 23:case"end":return t.stop()}}),t)})))()}})};t.default=d},a119:function(e,t,i){"use strict";i.r(t);var r=i("5dc2"),a=i.n(r);for(var s in r)"default"!==s&&function(e){i.d(t,e,(function(){return r[e]}))}(s);t["default"]=a.a},ec62:function(e,t,i){"use strict";var r=i("01ad"),a=i.n(r);a.a}}]);